@TrainingLog = do (Backbone, Marionette) ->

    $.ajaxSetup
        dataType: 'json'

    App = new Marionette.Application()

    App.Router = new Marionette.AppRouter

        controller:
            productsModule: ->
                App.Products.start()

        appRoutes:
            'products': 'productsModule'

    App.config =
        sitename: 'TrainingLog'
        asset_host: <%= "'#{Rails.configuration.action_controller.asset_host}'" %>
        env: <%= "'#{Rails.env}'" %>

    App.addRegions
        main: '#main'

    App.on 'before:start', ->

    App.on 'start', ->
        Backbone.history.start(silent: true)
        Backbone.history.loadUrl Backbone.history.getFragment()

    App

$ ->
    TrainingLog.start()