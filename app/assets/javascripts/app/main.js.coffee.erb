@TrainingLog = do (Backbone, Marionette) ->

    App = new Marionette.Application()

    App.Router = new Marionette.AppRouter

        controller:
            foodApp: ->
                console.log('food')
                App.FoodApp.start()
                console.log('after start')

        appRoutes:
            'dashboard': 'foodApp'

    App.config =
        sitename: 'TrainingLog'
        asset_host: <%= "'#{Rails.configuration.action_controller.asset_host}'" %>
        env: <%= "'#{Rails.env}'" %>

    App.addRegions
        main: '#main',
        modalRegion:
            selector: '#modal'

    App.on 'before:start', ->

    App.on 'start', ->
        Backbone.history.start(pushState: true, silent: true)
        Backbone.history.loadUrl Backbone.history.getFragment()

    App

$ ->
    TrainingLog.start()